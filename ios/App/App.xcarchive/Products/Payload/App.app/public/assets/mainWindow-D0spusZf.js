import{p as M,g as W,n as L,r as w,k as te,ak as z,w as T,U as ae,u as H,y as P,c as a,al as le,f as R,ar as oe,aG as ne,a5 as $,A as se,aH as re,o as ue,L as ie,D as i,E as S,B as ce,F as h,H as de}from"./index-KF56cXUu.js";import{d as fe,e as me,f as ve,h as _,i as ge,o as Ve,m as ke,p as pe,q as O,c as J,r as he,u as we,n as ye}from"./app-cT5gNRjW.js";import{f as q,n as be,h as Ce,L as xe,D as Se,_ as Ee,g as E}from"./VAvatar-CBxZwzSi.js";import{V as Pe,e as Ie,a as j,b as F,c as Ae,d as Be,f as Ue}from"./VRow-eJbrdKF-.js";const De=M({fullscreen:Boolean,retainFocus:{type:Boolean,default:!0},scrollable:Boolean,...fe({origin:"center center",scrollStrategy:"block",transition:{component:me},zIndex:2400})},"VDialog"),Fe=W()({name:"VDialog",props:De(),emits:{"update:modelValue":t=>!0,afterEnter:()=>!0,afterLeave:()=>!0},setup(t,y){let{emit:m,slots:n}=y;const r=L(t,"modelValue"),{scopeId:c}=ve(),o=w();function v(u){var f,l;const d=u.relatedTarget,g=u.target;if(d!==g&&((f=o.value)!=null&&f.contentEl)&&((l=o.value)!=null&&l.globalTop)&&![document,o.value.contentEl].includes(g)&&!o.value.contentEl.contains(g)){const e=le(o.value.contentEl);if(!e.length)return;const s=e[0],V=e[e.length-1];d===s?V.focus():s.focus()}}te(()=>{document.removeEventListener("focusin",v)}),z&&T(()=>r.value&&t.retainFocus,u=>{u?document.addEventListener("focusin",v):document.removeEventListener("focusin",v)},{immediate:!0});function b(){var u;m("afterEnter"),(u=o.value)!=null&&u.contentEl&&!o.value.contentEl.contains(document.activeElement)&&o.value.contentEl.focus({preventScroll:!0})}function C(){m("afterLeave")}return T(r,async u=>{var d;u||(await ae(),(d=o.value.activatorEl)==null||d.focus({preventScroll:!0}))}),H(()=>{const u=_.filterProps(t),d=P({"aria-haspopup":"dialog"},t.activatorProps),g=P({tabindex:-1},t.contentProps);return a(_,P({ref:o,class:["v-dialog",{"v-dialog--fullscreen":t.fullscreen,"v-dialog--scrollable":t.scrollable},t.class],style:t.style},u,{modelValue:r.value,"onUpdate:modelValue":f=>r.value=f,"aria-modal":"true",activatorProps:d,contentProps:g,height:t.fullscreen?void 0:t.height,width:t.fullscreen?void 0:t.width,maxHeight:t.fullscreen?void 0:t.maxHeight,maxWidth:t.fullscreen?void 0:t.maxWidth,role:"dialog",onAfterEnter:b,onAfterLeave:C},c),{activator:n.activator,default:function(){for(var f=arguments.length,l=new Array(f),e=0;e<f;e++)l[e]=arguments[e];return a(q,{root:"VDialog"},{default:()=>{var s;return[(s=n.default)==null?void 0:s.call(n,...l)]}})}})}),ge({},o)}}),Le=M({indeterminate:Boolean,inset:Boolean,flat:Boolean,loading:{type:[Boolean,String],default:!1},...Ve(),...ke()},"VSwitch"),Te=W()({name:"VSwitch",inheritAttrs:!1,props:Le(),emits:{"update:focused":t=>!0,"update:modelValue":t=>!0,"update:indeterminate":t=>!0},setup(t,y){let{attrs:m,slots:n}=y;const r=L(t,"indeterminate"),c=L(t,"modelValue"),{loaderClasses:o}=be(t),{isFocused:v,focus:b,blur:C}=pe(t),u=w(),d=z&&window.matchMedia("(forced-colors: active)").matches,g=R(()=>typeof t.loading=="string"&&t.loading!==""?t.loading:t.color),f=oe(),l=R(()=>t.id||`switch-${f}`);function e(){r.value&&(r.value=!1)}function s(V){var k,I;V.stopPropagation(),V.preventDefault(),(I=(k=u.value)==null?void 0:k.input)==null||I.click()}return H(()=>{const[V,k]=ne(m),I=O.filterProps(t),G=J.filterProps(t);return a(O,P({class:["v-switch",{"v-switch--flat":t.flat},{"v-switch--inset":t.inset},{"v-switch--indeterminate":r.value},o.value,t.class]},V,I,{modelValue:c.value,"onUpdate:modelValue":A=>c.value=A,id:l.value,focused:v.value,style:t.style}),{...n,default:A=>{let{id:K,messagesId:Q,isDisabled:X,isReadonly:Y,isValid:N}=A;const B={model:c,isValid:N};return a(J,P({ref:u},G,{modelValue:c.value,"onUpdate:modelValue":[x=>c.value=x,e],id:K.value,"aria-describedby":Q.value,type:"checkbox","aria-checked":r.value?"mixed":void 0,disabled:X.value,readonly:Y.value,onFocus:b,onBlur:C},k),{...n,default:x=>{let{backgroundColorClasses:U,backgroundColorStyles:p}=x;return a("div",{class:["v-switch__track",d?void 0:U.value],style:p.value,onClick:s},[n["track-true"]&&a("div",{key:"prepend",class:"v-switch__track-true"},[n["track-true"](B)]),n["track-false"]&&a("div",{key:"append",class:"v-switch__track-false"},[n["track-false"](B)])])},input:x=>{let{inputNode:U,icon:p,backgroundColorClasses:Z,backgroundColorStyles:ee}=x;return a($,null,[U,a("div",{class:["v-switch__thumb",{"v-switch__thumb--filled":p||t.loading},t.inset||d?void 0:Z.value],style:t.inset?void 0:ee.value},[n.thumb?a(q,{defaults:{VIcon:{icon:p,size:"x-small"}}},{default:()=>[n.thumb({...B,icon:p})]}):a(he,null,{default:()=>[t.loading?a(xe,{name:"v-switch",active:!0,color:N.value===!1?void 0:g.value},{default:D=>n.loader?n.loader(D):a(Se,{active:D.isActive,color:D.color,indeterminate:!0,size:"16",width:"2"},null)}):p&&a(Ce,{key:String(p),icon:p,size:"x-small"},null)]})])])}})}})}),{}}}),Ne={__name:"mainWindow",setup(t){const y=we(),m=se(),n=re(),r=w(localStorage.getItem("remoteUrl")||""),c=w(JSON.parse(localStorage.getItem("autoEnter")||"false")),o=w(!1),v=w(""),b=w(null);function C(){localStorage.setItem("remoteUrl",r.value),alert("地址已保存")}async function u(){if(r.value)try{const l=await fetch(r.value,{cache:"no-store"});if(!l.ok)throw new Error("无法获取配置文件");const e=await l.json();y.$patch(e),m.push("/infoPage")}catch(l){v.value=l.message,o.value=!0}else v.value="请输入有效的请求地址",o.value=!0}function d(){b.value.click()}function g(){m.push("/infoPage")}const f=l=>{const e=l.target.files[0];if(e&&e.type==="application/json"){const s=new FileReader;s.onload=V=>{try{const k=JSON.parse(V.target.result);console.log(k),y.$patch(k),m.push("/infoPage")}catch{console.error("Invalid JSON file")}},s.readAsText(e)}else console.error("Please select a valid JSON file")};return ue(()=>{const l=localStorage.getItem("remoteUrl");l&&(r.value=l),!(n.query.skipAutoEnter==="true")&&c.value&&m.push("/infoPage")}),T(c,l=>{localStorage.setItem("autoEnter",JSON.stringify(l))}),(l,e)=>(ce(),ie($,null,[a(Pe,{class:"main-container","fill-height":""},{default:i(()=>[a(Ie,{justify:"center",align:"center"},{default:i(()=>[a(j,{cols:"12",md:"4",class:"d-flex flex-column"},{default:i(()=>[a(F,{class:"pa-4 fade-in slide-in",outlined:""},{default:i(()=>[a(ye,{modelValue:r.value,"onUpdate:modelValue":e[0]||(e[0]=s=>r.value=s),label:"请求地址",clearable:""},null,8,["modelValue"]),a(E,{block:"",color:"deep-purple accent-4",dark:"",onClick:C},{default:i(()=>e[4]||(e[4]=[h("保存地址")])),_:1}),e[6]||(e[6]=S("p",{class:"mt-2 text-center"},"输入并保存请求地址",-1)),a(E,{block:"",color:"deep-purple accent-4",dark:"",class:"mt-2",onClick:d},{default:i(()=>e[5]||(e[5]=[h("打开配置")])),_:1}),e[7]||(e[7]=S("p",{class:"mt-2 text-center"},"打开 Json 配置文件",-1))]),_:1})]),_:1}),a(j,{cols:"12",md:"4",class:"d-flex flex-column"},{default:i(()=>[a(F,{class:"pa-4 fade-in slide-in",outlined:""},{default:i(()=>[a(E,{block:"",color:"teal accent-4",dark:"",onClick:u},{default:i(()=>e[8]||(e[8]=[h("请求配置")])),_:1}),e[10]||(e[10]=S("p",{class:"mt-2 text-center"},"请求并加载配置",-1)),a(E,{block:"",color:"teal accent-4",dark:"",class:"mt-2",onClick:g},{default:i(()=>e[9]||(e[9]=[h("直接进入看板")])),_:1}),e[11]||(e[11]=S("p",{class:"mt-2 text-center"},"直接进入看板，将继续使用上次加载的配置",-1)),a(Te,{modelValue:c.value,"onUpdate:modelValue":e[1]||(e[1]=s=>c.value=s),label:"下次自动进入看板",class:"mt-2 auto-enter-switch"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),a(Fe,{modelValue:o.value,"onUpdate:modelValue":e[3]||(e[3]=s=>o.value=s),"max-width":"500"},{default:i(()=>[a(F,null,{default:i(()=>[a(Ae,{class:"headline"},{default:i(()=>e[12]||(e[12]=[h("错误")])),_:1}),a(Be,null,{default:i(()=>[h(de(v.value),1)]),_:1}),a(Ue,null,{default:i(()=>[a(E,{color:"red darken-1",text:"",onClick:e[2]||(e[2]=s=>o.value=!1)},{default:i(()=>e[13]||(e[13]=[h("关闭")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}),S("input",{type:"file",ref_key:"fileInput",ref:b,onChange:f,style:{display:"none"},accept:".json"},null,544)],64))}},je=Ee(Ne,[["__scopeId","data-v-e41a35cd"]]);export{je as default};
